<?xml version="1.0" encoding="utf-8"?>
<openerp>
    <data>
        <record id="view_marketing_campaign_form" model="ir.ui.view">
            <field name="name">marketing.campaign.form.inherited.sale_campaign</field>
            <field name="model">marketing.campaign</field>
            <field name="inherit_id" ref="marketing_campaign.view_marketing_campaign_form" />
            <field name="arch" type="xml">
                <field name="fixed_cost" position="after">
                    <field name="pricelist" />
                    <field name="reseller_pricelist" />
                </field>
                <field name="unique_field_id" position="after">
                    <field name="date_start" />
                    <field name="date_stop" />
                </field>
                <separator string="Activities" position="before">
                    <field name="product_ids" widget="many2many_tags" />
                    <field name="website_description" />
                </separator>
            </field>
        </record>
        <template id="current_campaign_view" name="Current Campaign Page">
            <t t-call="website.layout">
                <div id="wrap">
                    <div class="oe_structure">
                        <div class="container">
                            <h1 class="text-center">
                                <t t-esc="campaign.name" />
                            </h1>
                            <h3 class="text-center">
                                <t t-esc="campaign.date_start" />
                                -
                                <t t-esc="campaign.date_stop" />
                            </h3>
                            <div t-field="campaign.website_description" />
                            <div class="col-md-12" id="products_grid">
                                <div t-foreach="campaign.product_ids" t-as="product">
                                    <div class="col-md-4 c_product_idv">
                                        <t t-call="sale_campaign.products_item_sc" />
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </t>
        </template>
        <template id="products_item_sc" name="Product item">
            <form action="/shop/cart/update" method="post">
                <div itemscope="itemscope" itemtype="http://schema.org/Product">
                    <div class="oe_product_image">
                        <a itemprop="url" t-att-href="'/shop/product/%s' % slug(product)">
                            <img itemprop="image" class="img img-responsive" t-att-src="website.image_url(product, 'image', None if product_image_big else '300x300')" t-att-alt="product.name" />
                        </a>
                    </div>
                    <section>
                        <h5>
                            <strong>
                                <a itemprop="name" t-att-href="'/shop/product/%s' % slug(product)" t-field="product.name" />
                            </strong>
                        </h5>
                        <div class="oe_vertel_product_info">
                            <p class="p_desc" t-field="product.description_sale"/>
                        </div>
                        <p class="text-muted" t-field="product.default_code"/>
                        <div itemprop="offers" itemscope="itemscope" itemtype="http://schema.org/Offer" class="product_price" t-if="product.product_variant_ids">
                            <b>
                                <t t-if="(product.lst_price - product.price) &gt; 0.1">
                                    <del class="text-danger" style="white-space: nowrap;" t-field="product.lst_price" t-field-options='{
                  "widget": "monetary",
                  "from_currency": "product.company_id.currency_id",
                  "display_currency": "user_id.partner_id.property_product_pricelist.currency_id"
                }' />
                                    &amp;nbsp;
                                </t>
                                <span t-field="product.price" style="white-space: nowrap;" t-field-options='{
                   "widget": "monetary",
                   "display_currency": "user_id.partner_id.property_product_pricelist.currency_id"
               }' />
                                <span itemprop="price" style="display:none;" t-esc="product.price" />
                                <span itemprop="priceCurrency" style="display:none;" t-esc="user_id.partner_id.property_product_pricelist.currency_id.name" class='decimal_precision' t-att-data-precision="website.pricelist_id.currency_id.rounding" />
                            </b>
                        </div>
                        <b t-if="product.qty_available &gt; 0.0" class="" style="color: #1CB807;">
                            I lager
                        </b>
                        <b t-if="product.qty_available &lt;= 0.0" class="" style="color: #f00;">
                            Ej i lager
                        </b>
                        <form action="/shop/cart/update" class="js_add_cart_variants" t-att-data-attribute_value_ids="product.product_variant_ids.ids" method="POST">
                            <div class="product_shop col-md-12">
                                <input type="hidden" class="product_id" name="product_id" t-att-value="int(product.product_variant_ids[0]) if len(product.product_variant_ids) == 1 else '0'"/>
                                <a class="btn btn-default btn-sm" t-att-href="'/shop/product/%s' % slug(product)">MER INFO</a>
                                <input type="text" class="oe_p_qty form-control input-sm" data-min="1" name="add_qty" value="1"/>
                                <a id="add_to_cart" class="btn btn-primary btn-sm js_check_product a-submit" href="#">Buy</a>
                            </div>
                        </form>
                    </section>
                </div>
            </form>
        </template>
        <template id="css_js" inherit_id="website.layout" name="Css Js">
            <xpath expr="//t[@t-call-assets='website.assets_frontend']" position="after">
                <link href="/sale_campaign/static/src/css/sale_campaign.css" rel="stylesheet" type="text/css" />
            </xpath>
        </template>
    </data>
</openerp>
